webpackJsonp([4],{"57Tg":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("iqdJ"),r=a("ACsF"),s=a.n(r),i={components:{imageModal:o.a,myCarousel:s.a},data:function(){return{board:{user:{},comments:[],createdTime:"",lastModifiedTime:"",files:[]},comment:"",commentInterval:"",boardUpdate:!1,carouselArr:[],carouselModal:!1}},props:["boardId"],created:function(){var t=this;this.getBoard(),this.commentInterval=setInterval(function(){t.$axios({method:"get",url:"/comments/"+t.boardId}).then(function(e){console.log(e.data),t.board.comments=e.data})},2e3)},beforeDestroy:function(){clearInterval(this.commentInterval)},methods:{getBoard:function(){var t=this;this.$axios({method:"get",url:"/board/"+this.boardId}).then(function(e){switch(t.board=e.data,t.board.grade){case"GOOD":t.board.grade="맛있다!";break;case"SOSO":t.board.grade="평범하다";break;case"BAD":t.board.grade="별로..."}console.log(t.board),console.log(t.board.user),console.log(t.board.comments),t.board.files.forEach(function(e){t.carouselArr.push('<div class="example-slide"><img src="upload/'+e+'" style="width:600px;height:600px;" alt=""></div>')}),console.log(t.carouselArr),t.board.user.token===localStorage.getItem("token")&&(t.boardUpdate=!0)}).catch(function(t){console.log(t)})},commentWrite:function(){var t=this,e=new FormData;e.set("comment",this.comment),e.set("token",localStorage.getItem("token")),e.set("boardId",this.boardId),this.comment="",this.$axios({method:"post",url:"/comment",data:e,headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){"FAIL"==e.data.Auth&&(window.alert("로그인이 필요합니다"),t.comment="")}).catch(function(t){console.log(t)})},deleteBoard:function(){var t=this;this.$axios({method:"patch",url:"board/"+this.boardId,headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){"FAIL"==e.data.Auth?(window.alert("로그인이 필요합니다"),t.$router.push("/")):(window.alert("성공적으로 삭제되었습니다."),t.$router.push("/board/"+t.board.placeId+"/"+t.board.placeName))})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{"background-color":"#e6e6e6ea"}},[a("header",[a("h1",{staticStyle:{cursor:"pointer",margin:"0"},on:{click:function(e){return t.$router.push("/")}}},[t._v("HeeJun")])]),t._v(" "),a("div",{attrs:{id:"main"}},[a("div",{staticClass:"inner",staticStyle:{"text-align":"left",padding:"15px"}},[a("div",{staticStyle:{float:"left"}},[t.board.user.userProfile?a("img",{staticClass:"boardProfile",attrs:{src:"upload/"+t.board.user.userProfile,alt:""}}):a("img",{staticClass:"boardProfile",attrs:{src:"upload/default.png",alt:""}}),t._v(" "),a("h2",{staticStyle:{display:"inline","vertical-align":"top","letter-spacing":"2px"}},[t._v(t._s(t.board.user.userName))]),t._v(" "),a("h6",{staticStyle:{"margin-top":"10px","letter-spacing":"1px"}},[t._v(t._s(t.board.placeName))])]),t._v(" "),a("div",{staticStyle:{float:"right"}},[a("h2",{staticStyle:{display:"inline","letter-spacing":"1px"}},[t._v(t._s(t.board.grade))])]),t._v(" "),a("div",{staticStyle:{clear:"both"}},[a("p",[t._v(t._s(t.board.boardContent))]),t._v(" "),a("p",{staticStyle:{margin:"0"}},[t._v(t._s(t.board.createdTime.substring(0,10)))])]),t._v(" "),t.board.files.length?a("div",{staticClass:"boardImages",staticStyle:{"margin-top":"15px"}},t._l(t.board.files,function(e){return a("span",{key:e,staticStyle:{cursor:"pointer"}},[a("img",{staticClass:"boardImage",attrs:{src:"upload/"+e,alt:""},on:{click:function(e){t.carouselModal=!0}}})])}),0):t._e()]),t._v(" "),a("div",{staticClass:"inner"},[a("section",[t.board.comments.length?a("div",{staticClass:"commentsList"},t._l(t.board.comments,function(e){return a("div",{key:e,staticClass:"comment"},[a("div",{staticStyle:{float:"left",margin:"10px 0 0 10px"}},[e.user.userProfile?a("img",{staticClass:"commentImage",attrs:{src:"upload/"+e.user.userProfile,alt:""}}):a("img",{staticClass:"commentImage",attrs:{src:"upload/default.png",alt:""}}),t._v(" "),a("strong",{staticStyle:{margin:"0 0 0 10px","vertical-align":"top"}},[t._v(t._s(e.user.userName))])]),t._v(" "),a("p",{staticStyle:{float:"right",margin:"5px 10px 0 0"}},[t._v(t._s(e.createdDate.substring(0,10)))]),t._v(" "),a("p",{staticClass:"event_desc"},[t._v(t._s(e.commentContent))])])}),0):t._e(),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticStyle:{"border-top-color":"#E9E9E9"},attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.comment},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.commentWrite(e)},input:function(e){e.target.composing||(t.comment=e.target.value)}}}),t._v(" "),a("div",{staticStyle:{"margin-bottom":"30px"}},[a("button",{attrs:{disabled:!t.$store.state.isLogin},on:{click:t.commentWrite}},[t._v("댓글 등록")]),t._v(" "),t.boardUpdate?a("div",[a("button",{on:{click:function(e){return t.$router.push("/boardUpdate/"+t.boardId)}}},[t._v("수정하기")]),t._v(" "),a("button",{on:{click:t.deleteBoard}},[t._v("삭제하기")])]):t._e()])])])]),t._v(" "),a("footer",{staticStyle:{"background-color":"#e6e6e6ea"},attrs:{id:"footer"}},[t.carouselModal?a("div",{staticClass:"modal-mask"},[a("div",{staticClass:"modal-wrapper"},[a("div",{staticClass:"modal-container"},[a("div",[a("i",{staticClass:"fas fa-times fa-lg",staticStyle:{cursor:"pointer",float:"right"},on:{click:function(e){t.carouselModal=!1}}})]),t._v(" "),a("myCarousel",{staticStyle:{"margin-top":"25px"},attrs:{data:t.carouselArr,autoplay:!1}})],1)])]):t._e()])])},staticRenderFns:[]};var l=a("VU/8")(i,n,!1,function(t){a("nSh4")},"data-v-42b07f35",null);e.default=l.exports},nSh4:function(t,e){}});
//# sourceMappingURL=4.01819a02bbdacf2aeff5.js.map