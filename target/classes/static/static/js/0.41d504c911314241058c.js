webpackJsonp([0],{"/w0W":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={props:["boardId"],data:function(){return{content:"",grade:"",token:localStorage.getItem("token"),board:{user:{},files:[]},boardImage:[],image:[]}},mounted:function(){var t=this;this.$axios({method:"get",url:"/board/"+this.boardId}).then(function(e){console.log(e),e.data&&(console.log(e.data),t.board=e.data,t.content=t.board.boardContent,t.grade=t.board.grade,t.board.files.forEach(function(e){t.boardImage.push(e),t.image.push("upload/"+e)}),console.log(t.boardImage))})},methods:{boardUpdate:function(){var t=this,e=new FormData;e.set("grade",this.grade),e.set("content",this.content),e.set("boardId",this.boardId),this.boardImage.forEach(function(t){t.lastModified?(console.log("files"),e.append("files",t)):(console.log("origin"),e.append("fileNames",t))}),this.$axios({method:"patch",url:"/board",data:e,headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(e){"FAIL"==e.data.Auth?(window.alert("로그인이 필요합니다"),t.$router.push("/")):(window.alert("리뷰가 성공적으로 수정되었습니다."),t.$router.push("/board/"+t.board.placeId+"/"+t.board.placeName))}).catch(function(t){console.log(t)})},fileSelect:function(){for(var t=this,e=this.$refs.boardImage.files,a=0;a<e.length;a++){this.boardImage.push(e[a]);var o=new FileReader;o.onload=function(e){t.image.push(e.target.result),console.log(t.image)},o.readAsDataURL(e[a])}console.log(this.boardImage),console.log(this.boardImage.length)},removeFile:function(t){this.boardImage.splice(t,1),this.image.splice(t,1)},addFiles:function(){this.$refs.boardImage.click()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("body",{staticStyle:{"margin-top":"130px"}},[a("section",[a("header",[a("h1",{staticStyle:{cursor:"pointer",margin:"0"},on:{click:function(e){return t.$router.push("/")}}},[t._v("HeeJun")])]),t._v(" "),a("div",{staticClass:"container"},[a("strong",[t._v(t._s(t.board.placeName))]),t._v(" "),a("span",[t._v("\n                     의 리뷰\n                 ")]),t._v(" "),a("div",{staticClass:"reviewContent"},[a("ul",[a("li",[a("button",{class:{active:"GOOD"==t.grade},on:{click:function(e){t.grade="GOOD"}}},[t._v("맛있다!")])]),t._v(" "),a("li",[a("button",{class:{active:"SOSO"==t.grade},on:{click:function(e){t.grade="SOSO"}}},[t._v("평범하다!")])]),t._v(" "),a("li",[a("button",{class:{active:"BAD"==t.grade},on:{click:function(e){t.grade="BAD"}}},[t._v("별로!")])])]),t._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:t.board.user.userName+"님 솔직한 리뷰를 남겨주세요."},domProps:{value:t.content},on:{input:function(e){e.target.composing||(t.content=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"fileSelect"},[t._l(t.boardImage,function(e,o){return a("div",{key:o,staticClass:"uploadImage"},[a("div",{staticClass:"image-wrapper"},[a("div",[a("img",{staticStyle:{width:"90px",height:"90px",margin:"0 5px 0 0"},attrs:{src:t.image[o]}})]),t._v(" "),a("div",{staticClass:"image-delete-box"},[a("i",{staticClass:"fas fa-times",staticStyle:{"background-color":"black",color:"white"},on:{click:function(e){return t.removeFile(o)}}})])])])}),t._v(" "),a("input",{ref:"boardImage",attrs:{id:"files",type:"file",multiple:"multiple"},on:{change:t.fileSelect}}),t._v(" "),a("button",{staticClass:"addFile",staticStyle:{"font-size":"20px"},on:{click:t.addFiles}},[a("i",{staticClass:"fas fa-plus",staticStyle:{margin:"0 0 0 4.5px"}})])],2),t._v(" "),a("div",{staticClass:"reviewSubmit"},[a("button",{staticStyle:{margin:"0 20px"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("돌아가기")]),t._v(" "),a("button",{attrs:{disabled:!t.content},on:{click:t.boardUpdate}},[t._v("등록")])])])])])},staticRenderFns:[]};var n=a("VU/8")(o,i,!1,function(t){a("Zl69")},"data-v-ed40ff24",null);e.default=n.exports},Zl69:function(t,e){}});
//# sourceMappingURL=0.41d504c911314241058c.js.map