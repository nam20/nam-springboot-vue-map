webpackJsonp([5],{bF1H:function(e,t){},jtAw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={props:["placeId","placeName"],data:function(){return{content:"",grade:"GOOD",boardImage:[],image:[]}},computed:{me:function(){return this.$store.state.me}},created:function(){this.$store.dispatch("loadUser")},methods:{boardWrtie:function(){var e=this,t=new FormData;t.set("grade",this.grade),t.set("content",this.content),t.set("placeId",this.placeId),t.set("placeName",this.placeName),t.set("token",localStorage.getItem("token")),this.boardImage.forEach(function(e){return t.append("files",e)}),this.$axios({method:"post",url:"/board",data:t,headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")}}).then(function(t){"FAIL"===t.data.Auth?(window.alert("로그인이 필요합니다"),e.$router.push("/")):(window.alert("리뷰가 성공적으로 작성되었습니다."),e.$router.push("/board/"+e.placeId+"/"+e.placeName))}).catch(function(e){console.log(e)})},fileSelect:function(){for(var e=this,t=this.$refs.boardImage.files,a=0;a<t.length;a++){this.boardImage.push(t[a]);var i=new FileReader;i.onload=function(t){e.image.push(t.target.result)},i.readAsDataURL(t[a])}var n=new DataTransfer;this.$refs.boardImage.files=n.files},removeFile:function(e){this.boardImage.splice(e,1),this.image.splice(e,1)},addFiles:function(){this.$refs.boardImage.click()},createImage:function(e){new Image;var t=new FileReader,a=this;t.onload=function(e){a.image=e.target.result},t.readAsDataURL(e)}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"margin-top":"130px"}},[a("section",[a("div",{staticClass:"container"},[a("strong",[e._v(e._s(e.placeName))]),e._v(" "),a("span",[e._v("\n                     의 리뷰\n                 ")]),e._v(" "),a("div",{staticClass:"reviewContent"},[a("ul",[a("li",[a("button",{class:{active:"GOOD"===e.grade},on:{click:function(t){e.grade="GOOD"}}},[e._v("맛있다!")])]),e._v(" "),a("li",[a("button",{class:{active:"SOSO"===e.grade},on:{click:function(t){e.grade="SOSO"}}},[e._v("평범하다!")])]),e._v(" "),a("li",[a("button",{class:{active:"BAD"===e.grade},on:{click:function(t){e.grade="BAD"}}},[e._v("맛없다!!!")])])]),e._v(" "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{name:"",id:"",cols:"30",rows:"10",placeholder:(e.me.userName||"")+"님 솔직한 리뷰를 남겨주세요."},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}})]),e._v(" "),a("div",{staticClass:"fileSelect"},[e._l(e.boardImage,function(t,i){return a("div",{key:i,staticClass:"uploadImage"},[a("div",{staticClass:"image-wrapper"},[a("div",[a("img",{staticStyle:{width:"90px",height:"90px",margin:"0 5px 0 0"},attrs:{src:e.image[i]}})]),e._v(" "),a("div",{staticClass:"image-delete-box"},[a("i",{staticClass:"fas fa-times",staticStyle:{"background-color":"black",color:"white"},on:{click:function(t){return e.removeFile(i)}}})])])])}),e._v(" "),a("input",{ref:"boardImage",attrs:{id:"files",type:"file",multiple:"multiple"},on:{change:e.fileSelect}}),e._v(" "),a("button",{staticClass:"addFile",staticStyle:{"font-size":"20px"},on:{click:e.addFiles}},[a("i",{staticClass:"fas fa-plus",staticStyle:{margin:"0 0 0 4.5px"}})])],2),e._v(" "),a("div",{staticClass:"reviewSubmit"},[a("button",{staticStyle:{margin:"0 20px"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("돌아가기")]),e._v(" "),a("button",{attrs:{disabled:!e.content},on:{click:e.boardWrtie}},[e._v("등록")])])])])])},staticRenderFns:[]};var s=a("VU/8")(i,n,!1,function(e){a("bF1H")},"data-v-4fce5ea4",null);t.default=s.exports}});
//# sourceMappingURL=5.37f9d07492af6256fdc1.js.map